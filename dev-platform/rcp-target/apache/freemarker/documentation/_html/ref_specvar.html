<!doctype html>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
&quot;License&quot;); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
&quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!-- Generated by FreeMarker/Docgen from DocBook -->
<html lang="en" class="page-type-chapter">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<title>Special Variable Reference - Apache FreeMarker Manual</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="format-detection" content="telephone=no">
<meta property="og:site_name" content="Apache FreeMarker Manual">
<meta property="og:title" content="Special Variable Reference">
<meta property="og:locale" content="en_US">
<meta property="og:url" content="https://freemarker.apache.org/docs/ref_specvar.html">
<link rel="canonical" href="https://freemarker.apache.org/docs/ref_specvar.html">
<link rel="icon" href="favicon.png" type="image/png">
<link rel="stylesheet" type="text/css" href="docgen-resources/docgen.min.css?1612906439515">
</head>
<body itemscope itemtype="https://schema.org/Code">
    <meta itemprop="url" content="https://freemarker.apache.org/docs/">
    <meta itemprop="name" content="Apache FreeMarker Manual">

  <!--[if lte IE 9]>
  <div class="oldBrowserWarning" style="display: block">
    Unsupported web browser - Use a modern browser to view this website!
  </div>
  <![endif]-->  <div class="oldBrowserWarning">
    Unsupported web browser - Use a modern browser to view this website!
  </div>
<div class="header-top-bg"><div class="site-width header-top"><div id="hamburger-menu" role="button"></div>          <div class="logo">
<a href="https://freemarker.apache.org" role="banner"><img itemprop="image" src="logo.png" alt="FreeMarker"></a>          </div>
<ul class="tabs"><li><a href="https://freemarker.apache.org/">Home</a></li><li class="current"><a href="index.html">Manual</a></li><li><a class="external" href="api/index.html">Java API</a></li></ul><ul class="secondary-tabs"><li><a class="tab icon-heart" href="https://freemarker.apache.org/contribute.html" title="Contribute"><span>Contribute</span></a></li><li><a class="tab icon-bug" href="https://issues.apache.org/jira/browse/FREEMARKER/" title="Report a Bug"><span>Report a Bug</span></a></li><li><a class="tab icon-download" href="https://freemarker.apache.org/freemarkerdownload.html" title="Download"><span>Download</span></a></li></ul></div></div><div class="header-bottom-bg"><div class="site-width search-row"><a href="toc.html" class="navigation-header">Manual</a><div class="navigation-header"></div></div><div class="site-width breadcrumb-row">  <div class="breadcrumbs">
<ul class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList"><li class="step-0" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="label" itemprop="item" href="toc.html"><span itemprop="name">Apache FreeMarker Manual</span></a></li><li class="step-1" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="label" itemprop="item" href="ref.html"><span itemprop="name">Template Language Reference</span></a></li><li class="step-2" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="label" itemprop="item" href="ref_specvar.html"><span itemprop="name">Special Variable Reference</span></a></li></ul>  </div>
<div class="bookmarks" title="Bookmarks"><span class="sr-only">Bookmarks:</span><ul><li><a href="alphaidx.html">Alpha. index</a></li><li><a href="gloss.html">Glossary</a></li><li><a href="dgui_template_exp.html#exp_cheatsheet">Expressions</a></li><li><a href="ref_builtins_alphaidx.html">?builtins</a></li><li><a href="ref_directive_alphaidx.html">#directives</a></li><li>.spec_vars</li><li><a href="app_faq.html">FAQ</a></li></ul></div></div></div>    <div class="main-content site-width">
      <div class="content-wrapper">
  <div id="table-of-contents-wrapper" class="col-left">
      <script>var breadcrumb = ["Apache FreeMarker Manual","Template Language Reference","Special Variable Reference"];</script>
      <script src="toc.js?1612906439515"></script>
      <script src="docgen-resources/main.min.js?1612906439515"></script>
  </div>
<div class="col-right"><div class="page-content"><div class="page-title"><div class="pagers top"><a class="paging-arrow previous" href="ref_directive_visit.html"><span>Previous</span></a><a class="paging-arrow next" href="ref_reservednames.html"><span>Next</span></a></div><div class="title-wrapper">
<h1 class="content-header header-chapter" id="ref_specvar" itemprop="headline">Special Variable Reference</h1>
</div></div><p>Special variables are variables defined by the FreeMarker engine
      itself. To access them, you use the
      <code class="inline-code">.<em class="code-color">variable_name</em></code> syntax. For
      example, you can&#39;t write simply <code class="inline-code">version</code>; you have to
      write <code class="inline-code">.version</code>.</p>  <div class="callout note">
    <strong class="callout-label">Note:</strong>

        <p>As of FreeMarker 2.3.23, you can use camel case instead of snake
        case for special variable names, like <code class="inline-code">dataModel</code>
        instead of <code class="inline-code">data_model</code>. But know that then within
        the same template, FreeMarker will enforce the usage of camel case for
        all identifiers that are part of the template language (user defined
        names are not affected).</p>
        </div>
<p>The supported special variables are:</p><ul>
        <li>
          <a name="specvar.args"></a><code class="inline-code">args</code> (since 2.3.30): Used inside
          the <a href="ref_directive_macro.html#ref.directive.macro"><code>macro</code></a> and
          <a href="ref_directive_function.html#ref.directive.function"><code>function</code></a>
          directives, it returns all arguments of the current invocation of
          the macro or function. This allows processing all the arguments in
          an uniform way (like pass them to the <a href="ref_builtins_expert.html#ref_builtin_with_args"><code>with_args</code>
          built-in</a>). Further details:

          <ul>
            <li>
              When used inside a macro, <code class="inline-code">.args</code> is
              always a hash that maps the parameter names to the parameter
              values. That&#39;s so even if the macro was called with positional
              arguments, as the parameter names are declared by the
              <code class="inline-code">macro</code> directive. But when used inside a
              function, <code class="inline-code">.args</code> is always a sequence of the
              argument values. That&#39;s because functions can only be called
              with positional arguments, so the parameter names declared
              inside the <code class="inline-code">function</code> directive aren&#39;t
              relevant.
            </li>

            <li>
              For arguments that have a default value (as
              <code class="inline-code">b</code> in <code class="inline-code">&lt;#macro m1 a
              b=0&gt;</code>), if the caller of the macro or function has
              omitted that argument (as in <code class="inline-code">&lt;@m1 a=1
              /&gt;</code>), <code class="inline-code">.args</code> will contain the
              default value for that argument (<code class="inline-code">{&#39;a&#39;: 1, &#39;b&#39;:
              0}</code>).
            </li>

            <li>
              If there&#39;s a catch-all argument, like
              <code class="inline-code">others</code> in <code class="inline-code">&lt;#macro m2 a, b,
              others...&gt;</code>, then <code class="inline-code">.args</code> will
              contain the elements in the the catch-all parameter directly,
              and won&#39;t contain the declared catch-all parameter
              (<code class="inline-code">others</code>) itself. So for <code class="inline-code">&lt;@m2 a=1
              b=2 c=3 d=4 /&gt;</code> it will be <code class="inline-code">{&#39;a&#39;: 1, &#39;b&#39;: 2,
              &#39;c&#39;: 3, &#39;d&#39;: 4}</code>, and <em>not</em>
              <code class="inline-code">{&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;others&#39;: {&#39;c&#39;:3, &#39;d&#39;:
              4}}</code>.
            </li>

            <li>
              If a macro has a catch-all parameter, and the actual
              catch-all argument is not empty, and the macro uses
              <code class="inline-code">.args</code> somewhere, it can only be called with
              named arguments (like <code class="inline-code">&lt;@m a=1 b=2 /&gt;</code>),
              and not with positional arguments (like <code class="inline-code">&lt;@m 1 2
              /&gt;</code>). That&#39;s because for macros
              <code class="inline-code">.args</code> is always a hash, but if the arguments
              are positional, the catch-all arguments won&#39;t have names, so
              it&#39;s impossible to put them into the hash.
            </li>

            <li>
              <code class="inline-code">.args</code> is initialized immediately when
              the macro or function is called, and so it doesn&#39;t reflect
              changes made later on the local variables that correspond to the
              arguments. (However, if the argument value is a mutable object,
              and the objects itself is mutated, <code class="inline-code">.args</code> will
              contain the mutated object. Setting an argument variable with
              the <a href="ref_directive_local.html#ref.directive.local"><code>local</code>
              directive</a> doesn&#39;t mutate the object.)
            </li>

            <li>
              <code class="inline-code">.args</code> must occur inside a
              <code class="inline-code">macro</code> or <code class="inline-code">function</code>
              directive on the source code level, or else it&#39;s a template
              parsing error. So you can&#39;t use it in a template fragment that
              you insert dynamically into a macro or function (like via the
              <a href="ref_directive_include.html#ref.directive.include"><code>include</code>
              directive</a>, <a href="ref_builtins_expert.html#ref_builtin_eval"><code>eval</code>
              built-in</a>, or <a href="ref_builtins_expert.html#ref_builtin_interpret"><code>interpret</code>
              built-in</a>). That&#39;s because the <code class="inline-code">macro</code> or
              <code class="inline-code">function</code> has to know if it contains
              <code class="inline-code">.args</code> earlier than it&#39;s called.
            </li>

            <li>
              For macros, the order of elements in the
              <code class="inline-code">.args</code> hash is the same as the order in which
              the parameters were declared in the <code class="inline-code">macro</code>
              directive, and not the order the caller has used. Except,
              catch-all arguments will use the order that the caller used.
              (For functions and methods, as it only support positional
              arguments, the parameter order of on the caller side is the same
              as the parameter order in the <code class="inline-code">function</code>
              directive or Java method, so there&#39;s no doubt there.)
            </li>
          </ul>
        </li>

        <li>
          <code class="inline-code">auto_esc</code> (since 2.3.24): Boolean
          value that tells if auto-escaping (based on output format) is on or
          off at the place where this variable is referred (resolved
          statically). This is <em>not</em> affected by the
          deprecated <code class="inline-code">escape</code> directive. This only deals with
          automatic escaping based on the output format mechanism.
        </li>

        <li>
          <a name="ref_specvar_caller_template_name"></a><code class="inline-code">caller_template_name</code> (available
          since FreeMarker 2.3.28): Returns the name (path) of the template
          from which the current <a href="ref_directive_macro.html#ref.directive.macro">macro</a> or <a href="ref_directive_function.html#ref.directive.function">function</a> was called. It&#39;s
          mostly useful if you want to resolve paths relative to the caller
          template (<a href="ref_builtins_expert.html#ref_builtin_absolute_template_name">see an
          example here</a>). To serve that purpose better, if the caller
          template is nameless, this will be an empty string (not a missing
          value). Reading this variable will cause error if you aren&#39;t inside
          a macro or function call. In particular, directives and
          "methods" implemented in Java will not influence the
          value of this variable; it&#39;s only for macros and functions
          implemented in templates. (<span class="marked-for-programmers"><code class="inline-code">TemplateDirectiveModel</code>
          implementations can get similar information via the
          <code class="inline-code">freemarker.core.DirectiveCallPlace</code>
          object.</span>)
        </li>

        <li>
          <code class="inline-code">current_template_name</code>: The name of
          the template where we are now (available since FreeMarker 2.3.23).
          This can be missing (<code class="inline-code">null</code>) if the template was
          created on-the-fly in Java <span class="marked-for-programmers">(via
          <code class="inline-code">new Template(null,
          <em class="code-color">...</em>)</code>)</span>, rather than
          loaded from a backing store by name <span class="marked-for-programmers">(via
          <code class="inline-code"><em class="code-color">cfg</em>.getTemplate(name,
          <em class="code-color">...</em>)</code>)</span>. Migration
          notice: If you replace the deprecated
          <code class="inline-code">template_name</code> with this, note that the later is a
          0-length string instead of missing (<code class="inline-code">null</code>) if the
          template has no name, so you might want to write
          <code class="inline-code">current_template_name!&#39;&#39;</code> in legacy
          templates.
        </li>

        <li>
          <code class="inline-code">data_model</code>: A hash that you can use to
          access the data-model directly. That is, variables you did with
          <code class="inline-code">global</code> directive are not visible here.
        </li>

        <li>
          <code class="inline-code">error</code> (available since FreeMarker
          2.3.1): This variable accessible in the body of the <a href="ref_directive_attempt.html#ref.directive.attempt"><code>recover</code>
          directive</a>, where it stores the error message of the error we
          recover from.
        </li>

        <li>
          <code class="inline-code">globals</code>: A hash that you can use to access
          the globally accessible variables: the data-model and the variables
          created with <code class="inline-code">global</code> directive. Note that
          variables created with <code class="inline-code">assign</code> or
          <code class="inline-code">macro</code> are not globals, thus they never hide the
          variables when you use <code class="inline-code">globals</code>.
        </li>

        <li>
          <code class="inline-code">incompatible_improvements</code> (since
          FreeMarker 2.3.24): The <a href="pgui_config_incompatible_improvements.html"><code>incompatible_improvements</code>
          setting</a> of the current FreeMarker configuration, as a
          string.
        </li>

        <li>
          <code class="inline-code">lang</code>: Returns the language part of
          the current value of the locale setting. For example if
          <code class="inline-code">.locale</code> is <code class="inline-code">en_US</code>, then
          <code class="inline-code">.lang</code> is <code class="inline-code">en</code>.
        </li>

        <li>
          <code class="inline-code">locale</code>: Returns the current value
          of the locale setting. This is a string, for example
          <code class="inline-code">en_US</code>. For more information about locale strings
          <a href="ref_directive_setting.html#ref.directive.setting">see the
          <code>setting</code> directive</a>.
        </li>

        <li>
          <code class="inline-code">locale_object</code> (available since
          FreeMarker 2.3.21): Returns the current value of the locale setting
          as a <code class="inline-code">java.util.Locale</code> object, rather than as a
          string. This meant to be used instead of <code class="inline-code">.locale</code>
          when you want to pass it as a <code class="inline-code">java.util.Locale</code>
          object to a Java method. (The <code class="inline-code">Locale</code> object will
          be wrapped according the <code class="inline-code">object_wrapper</code> setting
          value. Whether you can actually pass this value to a Java method as
          a <code class="inline-code">Locale</code> object depends on the object wrapper,
          but an object wrapper that let you call Java methods directly is
          very unlikely to not support that.)
        </li>

        <li>
          <code class="inline-code">locals</code>: A hash that you can use to access
          the local variables (the variables created with the
          <code class="inline-code">local</code> directive, and the parameters of
          macro).
        </li>

        <li>
          <code class="inline-code">main</code>: A hash that you can use to access the
          main <a href="dgui_misc_namespace.html">namespace</a>. Note that
          global variables like the variables of data-model are
          <em>not</em> visible through this hash.
        </li>

        <li>
          <code class="inline-code">main_template_name</code>: The name of the
          top level template (available since FreeMarker 2.3.23). <span class="marked-for-programmers">(In Java, this is the template for which
          <code class="inline-code">Template.process</code> was called.) </span>This can
          be missing (<code class="inline-code">null</code>) if the template was created
          on-the-fly in Java <span class="marked-for-programmers">(via <code class="inline-code">new
          Template(null, <em class="code-color">...</em>)</code>)</span>,
          rather than loaded from a backing store by name <span class="marked-for-programmers">(via
          <code class="inline-code"><em class="code-color">cfg</em>.getTemplate(name,
          <em class="code-color">...</em>)</code>)</span>. Migration
          notice: If you replace the deprecated
          <code class="inline-code">template_name</code> with this, note that the later is a
          0-length string instead of missing (<code class="inline-code">null</code>) if the
          template has no name, so you might want to write
          <code class="inline-code">main_template_name!&#39;&#39;</code> in legacy templates.
        </li>

        <li>
          <code class="inline-code">namespace</code>: A hash that you can use to
          access the current <a href="dgui_misc_namespace.html">namespace</a>. Note that global
          variables like the variables of data-model are
          <em>not</em> visible through this hash.
        </li>

        <li>
          <code class="inline-code">node</code> (alias <code class="inline-code">current_node</code>
          for historical reasons): The node you are currently processing with
          the visitor pattern (i.e. with the <a href="ref_directive_visit.html"><code>visit</code>,
          <code>recurse</code>, ...etc. directives</a>). Also, it
          initially stores the root node when you use the <a href="pgui_misc_ant.html">FreeMarker XML Ant task</a>.
        </li>

        <li>
          <code class="inline-code">now</code>: Returns the current date-time.
          Usage examples: &quot;<code class="inline-code">Page generated: ${.now}</code>&quot;,
          &quot;<code class="inline-code">Today is ${.now?date}</code>&quot;, &quot;<code class="inline-code">The current
          time is ${.now?time}</code>&quot;.
        </li>

        <li>
           Returns the name of the current <a href="dgui_misc_autoescaping.html#dgui_misc_autoescaping_outputformat">output format</a>.
          This value is never missing/null. It&#39;s maybe the string
          <code class="inline-code">&quot;undefined&quot;</code>, which is just the name of the
          default output format.
        </li>

        <li>
          <code class="inline-code">output_encoding</code> (available since
          FreeMarker 2.3.1): Returns the name of the current output charset.
          This special variable is not existent if the framework that
          encapsulates FreeMarker doesn&#39;t specify the output charset for
          FreeMarker. <span class="marked-for-programmers">(Programmers can read more
          about charset issues <a href="pgui_misc_charset.html">here...</a>)</span>
        </li>

        <li>
          <code class="inline-code">get_optional_template</code>: This is a method
          that&#39;s used when you need to include or import a template that&#39;s
          possibly missing, and you need to handle that case on some special
          way. <a href="#ref_specvar_get_optional_template">More
          details...</a>
        </li>

        <li>
          <code class="inline-code">pass</code>: This is a macro that does nothing. It
          has no parameters. Mostly used as no-op node handler in XML
          processing.
        </li>

        <li>
          <code class="inline-code">template_name</code>: <em>Don&#39;t use
          it, because its behavior is strange when macros are used; use
          <code class="inline-code">current_template_name</code> or
          <code class="inline-code">main_template_name</code> instead (see migration notices
          there).</em> Gives the name of the main template, or if we are
          running an included or imported template, the name of that template.
          When calling macros, it becomes rather confusing: the macro call
          won&#39;t change the value of this special variable, but when
          <code class="inline-code">nested</code> is called, it changes it to the name of
          the template that belongs to the current namespace. (Available since
          FreeMarker 2.3.14.)
        </li>

        <li>
          <code class="inline-code">url_escaping_charset</code> (available
          since FreeMarker 2.3.1): If exists, it stores the name of the
          charset that should be used for URL escaping. If this variable
          doesn&#39;t exist that means that nobody has specified what charset
          should be used for URL encoding yet. In this case the <a href="ref_builtins_string.html#ref_builtin_url"><code>url</code> built-in</a>
          uses the charset specified by the <code class="inline-code">output_encoding</code>
          special variable for URL encoding; custom mechanism may follow the
          same logic. <span class="marked-for-programmers">(Programmers can read more
          about charset issues <a href="pgui_misc_charset.html">here...</a>)</span>
        </li>

        <li>
          <code class="inline-code">output_format</code> (since 2.3.24): The
          name of output format at the place where this variable is referred
          (resolved statically), such as <code class="inline-code">&quot;HTML&quot;</code>,
          <code class="inline-code">&quot;XML&quot;</code>, <code class="inline-code">&quot;RTF&quot;</code>,
          <code class="inline-code">&quot;plainText&quot;</code>, <code class="inline-code">&quot;undefined&quot;</code>, etc.
          <span class="marked-for-programmers">(The available names can be extended
          by the programmers, by the
          <code class="inline-code">registered_custom_output_formats</code>
          setting.)</span>
        </li>

        <li>
          <code class="inline-code">vars</code>: Expression
          <code class="inline-code">.vars.foo</code> returns the same variable as expression
          <code class="inline-code">foo</code>. It&#39;s useful if for some reasons you have to
          use square bracket syntax, since that works only for hash sub
          variables, so you need an artificial parent hash. For example, to
          read a top-level variable that has a strange name that would confuse
          FreeMarker, you can write
          <code class="inline-code">.vars[&quot;A strange name!&quot;]</code>. Or, to access a
          top-level variable with dynamic name given with variable
          <code class="inline-code">varName</code> you can write
          <code class="inline-code">.vars[varName]</code>. Note that the hash returned by
          <code class="inline-code">.vars</code> does not support <code class="inline-code">?keys</code>
          and <code class="inline-code">?values</code>.
        </li>

        <li>
          <code class="inline-code">version</code>: Returns the FreeMarker
          version number as string, for example <code class="inline-code">2.2.8</code>. This
          can be used to check which FreeMarker version does your application
          use, but note that this special variable does not exist prior to the
          2.3.0 or 2.2.8 versions. The version number of non-final releases
          contains dash and further info after the numbers, like in
          2.3.21-nightly_20140726T151800Z.
        </li>

        <li>
          <code class="inline-code">time_zone</code> (exists since FreeMarker
          2.3.31): The current value of the <code class="inline-code">time_zone</code>
          setting, as a string. This is the ID of the time zone, like
          <code class="inline-code">GMT+01:00</code>, or
          <code class="inline-code">America/Los_Angeles</code>.
        </li>
      </ul>
        



<h2 class="content-header header-simplesect" id="ref_specvar_get_optional_template">Using get_optional_template</h2>


        

        

        

        <p>This special variable is used when you need to include or import
        a template that&#39;s possibly missing, and you need to handle that case
        on some special way. It a method (so you meant to call it) that has
        the following parameters:</p>

        <div class="orderedlist"><ol type="1">
          <li>
            <p>The name of the template (can be relative or absolute), like
            <code class="inline-code">&quot;/commonds/footer.ftl&quot;</code>; similar to the first
            parameter of the <a href="ref_directive_include.html#ref.directive.include"><code>include</code>
            directive</a>. Required, string.</p>
          </li>

          <li>
            <p>An optional hash of options, like <code class="inline-code">{ &#39;parse&#39;: false,
            &#39;encoding&#39;: &#39;UTF-16BE&#39; }</code>. The valid keys are
            <code class="inline-code">encoding</code> and <code class="inline-code">parse</code>. The
            meaning of these are the same as of the similarly named <a href="ref_directive_include.html#ref.directive.include"><code>include</code>
            directive</a> parameters.</p>
          </li>
        </ol></div>

        <p>This method returns a hash that contains the following
        entries:</p>

        <ul>
          <li>
            <p><code class="inline-code">exists</code>: A boolean that tells if the
            template was found.</p>
          </li>

          <li>
            <p><code class="inline-code">include</code>: A directive that, when called,
            includes the template. Calling this directive is similar to
            calling the <a href="ref_directive_include.html#ref.directive.include"><code>include</code>
            directive</a>, but of course with this you spare looking up the
            template again. This directive has no parameters, nor nested
            content. If <code class="inline-code">exists</code> is <code class="inline-code">false</code>,
            this key will be missing; see later how can this be utilized with
            <a href="dgui_template_exp.html#dgui_template_exp_missing_default">the
            <code><em>exp</em>!<em>default</em></code>
            operator</a>.</p>
          </li>

          <li>
            <p><code class="inline-code">import</code>: A method that, when called,
            imports the template, and returns the namespace of the imported
            template. Calling this method is similar to calling the
            <code class="inline-code">import</code> directive, but of course with this you
            spare looking up the template again, also, it doesn&#39;t assign the
            namespace to anything, just returns it. The method has no
            parameters. If <code class="inline-code">exists</code> is
            <code class="inline-code">false</code>, this key will be missing; see later how
            can this be utilized with <a href="dgui_template_exp.html#dgui_template_exp_missing_default">the
            <code><em>exp</em>!<em>default</em></code>
            operator</a>.</p>
          </li>
        </ul>

        <p>When this method is called (like
        <code class="inline-code">.get_optional_template(&#39;some.ftl&#39;)</code>), it immediately
        loads the template if it exists, but doesn&#39;t yet process it, so it
        doesn&#39;t have any visible effect yet. The template will be processed
        only when <code class="inline-code">include</code> or <code class="inline-code">import</code>
        members of the returned structure is called. (Of course, when we say
        that it loads the template, it actually looks it up in the template
        cache, just like the <a href="ref_directive_include.html#ref.directive.include"><code>include</code>
        directive</a> does.)</p>

        <p>While it&#39;s not an error if the template is missing, it&#39;s an
        error if it does exist but still can&#39;t be loaded due to syntactical
        errors in it, or due to some I/O error.</p>

          <div class="callout note">
    <strong class="callout-label">Note:</strong>

          <p>If the template fails with "I/O error when trying to
          load optional template" when the template is missing, that&#39;s
          often because your application uses a custom
          <code class="inline-code">freemarker.cache.TemplateLoader</code> implementation,
          which incorrectly (against the API documentation) throws an
          <code class="inline-code">IOException</code> in the
          <code class="inline-code">findTemplateSource</code> method instead of returning
          <code class="inline-code">null</code> if a template is not found. If it&#39;s so, the
          Java programmers need to fix that. Another possibility is of course
          that it was indeed not possible to tell if the template exists or
          not due to some technical issues, in which case stopping with error
          is the correct behavior. See the cause
          <code class="inline-code">IOException</code> in the Java stack trace to figure out
          which case it is.</p>
          </div>


        <p>Example, in which depending on if <code class="inline-code">some.ftl</code>
        exists, we either print "Template was found:" and the
        include the template as <code class="inline-code">&lt;#include &#39;some.ftl&#39;&gt;</code>
        would, otherwise it we print "Template was
        missing.":</p>

        

    <div class="code-block role-template">
<div class="code-block-label">Template</div><pre class="code-block-body">&lt;#assign optTemp = .get_optional_template(&#39;some.ftl&#39;)&gt;
&lt;#if optTemp.exists&gt;
  Template was found:
  &lt;@optTemp.include /&gt;
&lt;#else&gt;
  Template was missing.
&lt;/#if&gt;</pre>    </div>


        <p>Example, in which we try to include <code class="inline-code">some.ftl</code>,
        but if that&#39;s missing then we try to include
        <code class="inline-code">some-fallback.ftl</code>, and if that&#39;s missing too then
        we call the <code class="inline-code">ultimateFallback</code> macro instead of
        including anything (note the <code class="inline-code">!</code>-s after the
        <code class="inline-code">include</code>-s; they belong to <a href="dgui_template_exp.html#dgui_template_exp_missing_default">the
        <code><em>exp</em>!<em>default</em></code>
        operator</a>):</p>

        

    <div class="code-block role-template">
<div class="code-block-label">Template</div><pre class="code-block-body">&lt;#macro ultimateFallback&gt;
  Something
&lt;/#macro&gt;

&lt;@(
  .get_optional_template(&#39;some.ftl&#39;).include!
  .get_optional_template(&#39;some-fallback.ftl&#39;).include!
  ultimateFallback
) /&gt;</pre>    </div>


        <p>Example, which behaves like <code class="inline-code">&lt;#import &#39;tags.ftl&#39; as
        tags&gt;</code>, except that if <code class="inline-code">tags.ftl</code> is
        missing, then it creates an empty <code class="inline-code">tags</code> hash:</p>

        

    <div class="code-block role-template">
<div class="code-block-label">Template</div><pre class="code-block-body">&lt;#assign tags = (.get_optional_template(&#39;tags.ftl&#39;).import())!{}&gt;</pre>    </div>

      <div class="bottom-pagers-wrapper"><div class="pagers bottom"><a class="paging-arrow previous" href="ref_directive_visit.html"><span>Previous</span></a><a class="paging-arrow next" href="ref_reservednames.html"><span>Next</span></a></div></div></div></div>      </div>
    </div>
<div class="site-footer"><div class="site-width"><div class="footer-top"><div class="col-left sitemap"><div class="column"><h3 class="column-header">Overview</h3><ul><li><a href="https://freemarker.apache.org/">What is FreeMarker?</a></li><li><a href="https://freemarker.apache.org/freemarkerdownload.html">Download</a></li><li><a href="app_versions.html">Version history</a></li><li><a href="https://freemarker.apache.org/history.html">About us</a></li><li><a itemprop="license" href="app_license.html">License</a></li></ul></div><div class="column"><h3 class="column-header">Handy stuff</h3><ul><li><a href="http://try.freemarker.org/">Try template online</a></li><li><a href="dgui_template_exp.html#exp_cheatsheet">Expressions cheatsheet</a></li><li><a href="ref_directive_alphaidx.html">#directives</a></li><li><a href="ref_builtins_alphaidx.html">?built_ins</a></li><li><a href="ref_specvar.html">.special_vars</a></li></ul></div><div class="column"><h3 class="column-header">Community</h3><ul><li><a href="https://github.com/freemarker/freemarker">FreeMarker on Github</a></li><li><a href="https://twitter.com/freemarker">Follow us on Twitter</a></li><li><a href="https://issues.apache.org/jira/browse/FREEMARKER/">Report a bug</a></li><li><a href="https://stackoverflow.com/questions/ask?tags=freemarker">Ask a question</a></li><li><a href="https://freemarker.apache.org/mailing-lists.html">Mailing lists</a></li></ul></div></div><div class="col-right"><ul class="social-icons"><li><a class="github" href="https://github.com/freemarker/freemarker">Github</a></li><li><a class="twitter" href="https://twitter.com/freemarker">Twitter</a></li><li><a class="stack-overflow" href="https://stackoverflow.com/questions/ask?tags=freemarker">Stack Overflow</a></li></ul><a class="xxe" href="http://www.xmlmind.com/xmleditor/" rel="nofollow" title="Edited with XMLMind XML Editor"><span>Edited with XMLMind XML Editor</span></a></div></div><div class="footer-bottom"> <p class="last-generated">
Last generated:
<time itemprop="dateModified" datetime="2021-02-09T21:33:59Z" title="Tuesday, February 9, 2021 9:33:59 PM GMT">2021-02-09 21:33:59 GMT</time>, for Freemarker 2.3.31 </p>
<p class="copyright">
© <span itemprop="copyrightYear">1999</span>–2021
<a itemtype="http://schema.org/Organization" itemprop="copyrightHolder" href="https://apache.org/">The Apache Software Foundation</a>. Apache FreeMarker, FreeMarker, Apache Incubator, Apache, the Apache FreeMarker logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p>
</div></div></div></body>
</html>
