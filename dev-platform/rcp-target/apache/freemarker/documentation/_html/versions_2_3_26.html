<!doctype html>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
&quot;License&quot;); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
&quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!-- Generated by FreeMarker/Docgen from DocBook -->
<html lang="en" class="page-type-section">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<title>2.3.26 (incubating at Apache) - Apache FreeMarker Manual</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="format-detection" content="telephone=no">
<meta property="og:site_name" content="Apache FreeMarker Manual">
<meta property="og:title" content="2.3.26 (incubating at Apache)">
<meta property="og:locale" content="en_US">
<meta property="og:url" content="https://freemarker.apache.org/docs/versions_2_3_26.html">
<link rel="canonical" href="https://freemarker.apache.org/docs/versions_2_3_26.html">
<link rel="icon" href="favicon.png" type="image/png">
<link rel="stylesheet" type="text/css" href="docgen-resources/docgen.min.css?1612906439515">
</head>
<body itemscope itemtype="https://schema.org/Code">
    <meta itemprop="url" content="https://freemarker.apache.org/docs/">
    <meta itemprop="name" content="Apache FreeMarker Manual">

  <!--[if lte IE 9]>
  <div class="oldBrowserWarning" style="display: block">
    Unsupported web browser - Use a modern browser to view this website!
  </div>
  <![endif]-->  <div class="oldBrowserWarning">
    Unsupported web browser - Use a modern browser to view this website!
  </div>
<div class="header-top-bg"><div class="site-width header-top"><div id="hamburger-menu" role="button"></div>          <div class="logo">
<a href="https://freemarker.apache.org" role="banner"><img itemprop="image" src="logo.png" alt="FreeMarker"></a>          </div>
<ul class="tabs"><li><a href="https://freemarker.apache.org/">Home</a></li><li class="current"><a href="index.html">Manual</a></li><li><a class="external" href="api/index.html">Java API</a></li></ul><ul class="secondary-tabs"><li><a class="tab icon-heart" href="https://freemarker.apache.org/contribute.html" title="Contribute"><span>Contribute</span></a></li><li><a class="tab icon-bug" href="https://issues.apache.org/jira/browse/FREEMARKER/" title="Report a Bug"><span>Report a Bug</span></a></li><li><a class="tab icon-download" href="https://freemarker.apache.org/freemarkerdownload.html" title="Download"><span>Download</span></a></li></ul></div></div><div class="header-bottom-bg"><div class="site-width search-row"><a href="toc.html" class="navigation-header">Manual</a><div class="navigation-header"></div></div><div class="site-width breadcrumb-row">  <div class="breadcrumbs">
<ul class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList"><li class="step-0" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="label" itemprop="item" href="toc.html"><span itemprop="name">Apache FreeMarker Manual</span></a></li><li class="step-1" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="label" itemprop="item" href="app.html"><span itemprop="name">Appendixes</span></a></li><li class="step-2" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="label" itemprop="item" href="app_versions.html"><span itemprop="name">Version history</span></a></li><li class="step-3" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="label" itemprop="item" href="versions_2_3_26.html"><span itemprop="name">2.3.26 (incubating at Apache)</span></a></li></ul>  </div>
<div class="bookmarks" title="Bookmarks"><span class="sr-only">Bookmarks:</span><ul><li><a href="alphaidx.html">Alpha. index</a></li><li><a href="gloss.html">Glossary</a></li><li><a href="dgui_template_exp.html#exp_cheatsheet">Expressions</a></li><li><a href="ref_builtins_alphaidx.html">?builtins</a></li><li><a href="ref_directive_alphaidx.html">#directives</a></li><li><a href="ref_specvar.html">.spec_vars</a></li><li><a href="app_faq.html">FAQ</a></li></ul></div></div></div>    <div class="main-content site-width">
      <div class="content-wrapper">
  <div id="table-of-contents-wrapper" class="col-left">
      <script>var breadcrumb = ["Apache FreeMarker Manual","Appendixes","Version history","2.3.26 (incubating at Apache)"];</script>
      <script src="toc.js?1612906439515"></script>
      <script src="docgen-resources/main.min.js?1612906439515"></script>
  </div>
<div class="col-right"><div class="page-content"><div class="page-title"><div class="pagers top"><a class="paging-arrow previous" href="versions_2_3_27.html"><span>Previous</span></a><a class="paging-arrow next" href="versions_2_3_25.html"><span>Next</span></a></div><div class="title-wrapper">
<h1 class="content-header header-section1" id="versions_2_3_26" itemprop="headline">2.3.26 (incubating at Apache)</h1>
</div></div><div class="page-menu">
<div class="page-menu-title">Page Contents</div>
<ul><li><a class="page-menu-link" href="#autoid_161" data-menu-target="autoid_161">Changes on the FTL side</a></li><li><a class="page-menu-link" href="#autoid_162" data-menu-target="autoid_162">Changes on the Java side</a></li><li><a class="page-menu-link" href="#autoid_163" data-menu-target="autoid_163">Other changes</a></li></ul> </div><p>Release date: 2017-03-25</p><p><strong>This is a stable, final
        release.</strong> The "incubating" suffix is required
        by the Apache Software Foundation until the project becomes a fully
        accepted (graduated) Apache project.</p>
          



<h2 class="content-header header-section2" id="autoid_161">Changes on the FTL side</h2>


          <ul>
            <li>
              <p>Added
              <code class="inline-code"><em class="code-color">node</em>?next_sibling</code>
              and
              <code class="inline-code"><em class="code-color">node</em>?previous_sibling</code>
              to move sideways in a node trees (<a href="ref_builtins_node.html#ref_builtin_next_sibling">see reference...</a>).
              This works with XML DOM nodes, or with any custom
              <code class="inline-code">TemplateNodeModelEx</code> implementations.</p>
            </li>

            <li>
              <p>Added new <code class="inline-code">@@</code> keys to XML DOM models:
              <code class="inline-code">@@next_sibling_element</code>,
              <code class="inline-code">@@previous_sibling_element</code>. These get the
              sibling node if that&#39;s an element, with the extra that they
              silently skip any whitespace text and comment and processing
              instruction between them. (See more about <code class="inline-code">@@</code>
              keys <a href="xgui_imperative_formal.html">here...</a>)</p>
            </li>

            <li>
              <p>Bug fixed (<a href="https://issues.apache.org/jira/browse/FREEMARKER-42">FREEMARKER-42</a>):
              <code class="inline-code">?first</code> now works with FTL collections (things
              that can be listed but doesn&#39;t support getting items by index),
              not only with sequences. The practical importance of this is
              that <code class="inline-code">?first</code> now always works on Java
              <code class="inline-code">Set</code>-s (which is useful for
              <code class="inline-code">Set</code>-s with well defined ordering), while
              earlier it has failed depending on the
              <code class="inline-code">object_wrapper</code> configuration setting.</p>
            </li>
          </ul>
        
          



<h2 class="content-header header-section2" id="autoid_162">Changes on the Java side</h2>


          <ul>
            <li>
              <p><a href="https://issues.apache.org/jira/browse/FREEMARKER-24">FREEMARKER-24</a>:
              Added workaround (not enabled by default) to expose Java 8
              default methods (and the bean properties they define) to
              templates, despite that
              <code class="inline-code">java.beans.Introspector</code> (the official
              JavaBeans introspector) ignores them, at least as of JRE
              1.8.0_66. To enable this workaround, either increase the value
              of the <code class="inline-code">incompatibleImprovements</code> constructor
              argument of <code class="inline-code">DefaultObjectWrapper</code> or
              <code class="inline-code">BeansWrapper</code> the used to 2.3.26, or set its
              <code class="inline-code">treatDefaultMethodsAsBeanMembers</code> setting to
              <code class="inline-code">true</code>. Note that if you leave the
              <code class="inline-code">object_wrapper</code> setting of the
              <code class="inline-code">Configuration</code> on its default, it&#39;s enough to
              increase the <code class="inline-code">incompatibleImprovements</code> setting
              of the <code class="inline-code">Configuration</code> to 2.3.26, as that&#39;s
              inherited by the default
              <code class="inline-code">object_wrapper</code>.</p>
            </li>

            <li>
              <p>Added the
              <code class="inline-code">freemarker.template.TemplateNodeModelEx</code>
              interface which extends the <code class="inline-code">TemplateNodeModel</code>
              instance with two methods, <code class="inline-code">TemplateNodeModelEx
              getNextSibling()</code> and <code class="inline-code">TemplateNodeModelEx
              getPreviousSibling()</code> methods. This is required by
              <code class="inline-code"><em class="code-color">node</em>?next_sibling</code>
              and
              <code class="inline-code"><em class="code-color">node</em>?previous_sibling</code>
              in the templates. This new interface is already implemented by
              the standard W3C DOM node wrapper of FreeMarker.</p>
            </li>

            <li>
              <p>Made <code class="inline-code">+</code> operator when adding two hashes
              significantly faster (be removing the overhead caused be
              throwing and then catching an exception).</p>
            </li>

            <li>
              <p>Better error messages when someone tries to get an invalid
              <code class="inline-code">@@<em class="code-color">...</em></code> subvariable
              of an XML DOM node. (Now it&#39;s not issued by the XPath
              implementation, which just sees it as a syntactical
              error.)</p>
            </li>

            <li>
              <p>Added
              <code class="inline-code">Configuration.is<em class="code-color">Xxx</em>ExplictlySet</code>
              and
              <code class="inline-code">Configuration.unset<em class="code-color">Xxx</em></code>
              methods for the Configuration settings:
              <code class="inline-code">locale</code>, <code class="inline-code">time_zone</code>,
              <code class="inline-code">default_encoding</code>. (This can be utilized in
              frameworks to detect if the application has missed setting
              these. The backward compatible default values are often
              unwanted, as they are the default locale, time zone and file
              encoding of the Java environment.)</p>
            </li>

            <li>
              <p>The <code class="inline-code">locale</code> and
              <code class="inline-code">default_encoding</code> configuration settings now
              supports the special <code class="inline-code">&quot;JVM default&quot;</code> value when
              set from Java <code class="inline-code">.properties</code> file, or via
              <code class="inline-code">Configuration.setSettings(Properties)</code>, or via
              the <code class="inline-code">#setting</code> directive. Earlier only the
              <code class="inline-code">time_zone</code> setting has supported this
              value.</p>
            </li>

            <li>
              <p>Bug fixed: The OSGi
              <code class="inline-code">Bundle-RequiredExecutionEnvironment</code> entry in
              <code class="inline-code">META-INF/MANIFEST.MF</code> has incorrectly stated
              that the minimum required version is
              <code class="inline-code">J2SE-1.4</code>, while it&#39;s in fact
              <code class="inline-code">J2SE-1.5</code>. Also the highest utilized version
              was raised to <code class="inline-code">JavaSE-1.8</code>.</p>
            </li>

            <li>
              <p>Bug fixed: If <a href="pgui_config_incompatible_improvements.html#pgui_config_incompatible_improvements_how_to_set">the
              <code>incompatible_improvements</code> setting</a> is
              set to 2.3.26 (or higher),
              <code class="inline-code"><em class="code-color">exp</em>?interpret</code>
              always gets the parser-related settings from the template that
              it&#39;s called from. Earlier, sometimes it got those from the
              topmost (main) template instead. Similarly, the generated name
              of the template that <code class="inline-code">?interpret</code> creates will
              always refer to the template where&#39;s it&#39;s called from.</p>
            </li>

            <li>
              <p>Bug fixed: <code class="inline-code">MultiTemplateLoader</code>, when
              it&#39;s in sticky mode (the default), and the
              <code class="inline-code">TemplateLoader</code> that was successfully used for
              a given name last time doesn&#39;t find the template now (let&#39;s call
              it the sticked <code class="inline-code">TemplateLoader</code>), and thus
              <code class="inline-code">MultiTemplateLoader</code> falls back to trying all
              the <code class="inline-code">TemplateLoader</code>-s in order, will now skip
              the sticked <code class="inline-code">TemplateLoader</code>, as that was
              already attempted in the same
              <code class="inline-code">MultiTemplateLoader.findTemplateSource</code>
              invocation.</p>
            </li>

            <li>
              <p>Bug fixed:
              <code class="inline-code">NodeModel.mergeAdjacentText(Node)</code> didn&#39;t
              merged all adjacent text nodes, only pairs of adjacent text
              nodes. (Luckily this method is hardly ever used, and the more
              often used <code class="inline-code">NodeModel.simplify(Node)</code> was
              working correctly.)</p>
            </li>

            <li>
              <p>Performance improvements in the static utility methods of
              <code class="inline-code">NodeModel</code>: <code class="inline-code">simplify(Node)</code>,
              <code class="inline-code">mergeAdjacentText(Node)</code>,
              <code class="inline-code">removeComments(Node)</code>,
              <code class="inline-code">removePIs(Node)</code>.</p>
            </li>

            <li>
              <p>Added warning to the JavaDoc of
              <code class="inline-code">NodeModel.parse</code> methods to inform users about
              the possibility of XML External Entity (XXE) attacks if the
              source XML (not a template) comes from untrusted source. This is
              just an XML fact (i.e., that in an XML you can have external
              entities and they can be exploited), and has no much to do with
              FreeMarker. Also note that FreeMarker itself never calls
              <code class="inline-code">NodeModel.parse</code>; these are merely convenience
              methods that some applications directly call themselves to
              create a <code class="inline-code">NodeModel</code> from an XML file. As this
              method encapsulates the call to the platform XML parser, we
              thought it&#39;s better to point this risk out.</p>
            </li>

            <li>
              <p><code class="inline-code">DefaultObjectWrapper</code>, only with its
              <code class="inline-code">incompatible_improvements</code> set to 2.3.26
              (<a href="pgui_datamodel_objectWrapper.html#topic.defaultObjectWrapperIcI">see how
              here...</a>), wraps
              <code class="inline-code">java.util.Enumeration</code>-s into
              <code class="inline-code">freemarker.template.DefaultEnumerationAdapter</code>
              (a new class) instead of into
              <code class="inline-code">freemarker.ext.beans.EnumerationModel</code> (as far
              as <code class="inline-code">useAdaptersForContainers</code> is
              <code class="inline-code">true</code>, which is the default). This adapter is
              cleaner than <code class="inline-code">EnumerationModel</code> as it only
              implements the minimally required FTL type, which avoids some
              ambiguous situations. (Note that Java API methods aren&#39;t exposed
              anymore as subvariables; if you really need them, you can use
              <code class="inline-code">?api</code>).</p>
            </li>

            <li>
              <p><code class="inline-code">DefaultIteratorAdapter</code> now supports
              <code class="inline-code">?api</code>. It was an oversight that it
              didn&#39;t.</p>
            </li>

            <li>
              <p><code class="inline-code">Configuration.setSetting(String,
              String)</code> and <code class="inline-code">setSettings</code> now allows
              <code class="inline-code">null</code> value for
              <code class="inline-code">template_loader</code> (because
              <code class="inline-code">Configuration.setTemplateLoader(null)</code> is also
              allowed for a while.).</p>
            </li>

            <li>
              <p>The
              <code class="inline-code">freemarker.template.TemplateCollectionModelEx</code>
              interface and is not experimental anymore, so now it has
              backward compatibility guarantees. Note that the
              <code class="inline-code">TemplateCollectionModelEx.contains(TemplateModel)</code>
              method was removed from it.</p>
            </li>

            <li>
              <p><code class="inline-code">freemarker.template.DefaultNonListCollectionAdapter</code>
              class is not experimental anymore, so now it has backward
              compatibility guarantees.</p>
            </li>

            <li>
              <p><code class="inline-code">BeansWrapperConfiguration.classIntrospectorFactory</code>
              is not a protected field anymore, but a private one. Especially
              as the class of that field
              (<code class="inline-code">ClassIntrospectorBuilder</code>) was package
              private, it&#39;s pretty much sure that nobody depends on this
              field.</p>
            </li>

            <li>
              <p>Various smaller code cleanups.</p>
            </li>
          </ul>
        
          



<h2 class="content-header header-section2" id="autoid_163">Other changes</h2>


          <ul>
            <li>
              <p><a href="https://issues.apache.org/jira/browse/FREEMARKER-17">FREEMARKER-17</a>:
              Removed the Servlet- and JSP-related <code class="inline-code">*.dtd</code>
              files to simplify licensing. We can operate without them as
              before, as validation with them was disabled earlier too. At
              this point, everything in the source code of the FreeMarker
              engine, and everything in the produced
              <code class="inline-code">freemarker.jar</code> was created inside the
              FreeMarker project.</p>
            </li>

            <li>
              <p><a href="https://issues.apache.org/jira/browse/FREEMARKER-27">FREEMARKER-27</a>:
              Moved some content from the <code class="inline-code">NOTICES</code> files
              over to the <code class="inline-code">LICENSE</code> file, to follow the
              Apache Incubator guidelines closer.</p>
            </li>

            <li>
              <p>Various smaller JavaDoc improvements.</p>
            </li>
          </ul>
        <div class="bottom-pagers-wrapper"><div class="pagers bottom"><a class="paging-arrow previous" href="versions_2_3_27.html"><span>Previous</span></a><a class="paging-arrow next" href="versions_2_3_25.html"><span>Next</span></a></div></div></div></div>      </div>
    </div>
<div class="site-footer"><div class="site-width"><div class="footer-top"><div class="col-left sitemap"><div class="column"><h3 class="column-header">Overview</h3><ul><li><a href="https://freemarker.apache.org/">What is FreeMarker?</a></li><li><a href="https://freemarker.apache.org/freemarkerdownload.html">Download</a></li><li><a href="app_versions.html">Version history</a></li><li><a href="https://freemarker.apache.org/history.html">About us</a></li><li><a itemprop="license" href="app_license.html">License</a></li></ul></div><div class="column"><h3 class="column-header">Handy stuff</h3><ul><li><a href="http://try.freemarker.org/">Try template online</a></li><li><a href="dgui_template_exp.html#exp_cheatsheet">Expressions cheatsheet</a></li><li><a href="ref_directive_alphaidx.html">#directives</a></li><li><a href="ref_builtins_alphaidx.html">?built_ins</a></li><li><a href="ref_specvar.html">.special_vars</a></li></ul></div><div class="column"><h3 class="column-header">Community</h3><ul><li><a href="https://github.com/freemarker/freemarker">FreeMarker on Github</a></li><li><a href="https://twitter.com/freemarker">Follow us on Twitter</a></li><li><a href="https://issues.apache.org/jira/browse/FREEMARKER/">Report a bug</a></li><li><a href="https://stackoverflow.com/questions/ask?tags=freemarker">Ask a question</a></li><li><a href="https://freemarker.apache.org/mailing-lists.html">Mailing lists</a></li></ul></div></div><div class="col-right"><ul class="social-icons"><li><a class="github" href="https://github.com/freemarker/freemarker">Github</a></li><li><a class="twitter" href="https://twitter.com/freemarker">Twitter</a></li><li><a class="stack-overflow" href="https://stackoverflow.com/questions/ask?tags=freemarker">Stack Overflow</a></li></ul><a class="xxe" href="http://www.xmlmind.com/xmleditor/" rel="nofollow" title="Edited with XMLMind XML Editor"><span>Edited with XMLMind XML Editor</span></a></div></div><div class="footer-bottom"> <p class="last-generated">
Last generated:
<time itemprop="dateModified" datetime="2021-02-09T21:33:59Z" title="Tuesday, February 9, 2021 9:33:59 PM GMT">2021-02-09 21:33:59 GMT</time>, for Freemarker 2.3.31 </p>
<p class="copyright">
© <span itemprop="copyrightYear">1999</span>–2021
<a itemtype="http://schema.org/Organization" itemprop="copyrightHolder" href="https://apache.org/">The Apache Software Foundation</a>. Apache FreeMarker, FreeMarker, Apache Incubator, Apache, the Apache FreeMarker logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p>
</div></div></div></body>
</html>
