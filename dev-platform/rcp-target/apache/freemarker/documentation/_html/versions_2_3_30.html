<!doctype html>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
&quot;License&quot;); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
&quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!-- Generated by FreeMarker/Docgen from DocBook -->
<html lang="en" class="page-type-section">
<head prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">
<title>2.3.30 - Apache FreeMarker Manual</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="format-detection" content="telephone=no">
<meta property="og:site_name" content="Apache FreeMarker Manual">
<meta property="og:title" content="2.3.30">
<meta property="og:locale" content="en_US">
<meta property="og:url" content="https://freemarker.apache.org/docs/versions_2_3_30.html">
<link rel="canonical" href="https://freemarker.apache.org/docs/versions_2_3_30.html">
<link rel="icon" href="favicon.png" type="image/png">
<link rel="stylesheet" type="text/css" href="docgen-resources/docgen.min.css?1612906439515">
</head>
<body itemscope itemtype="https://schema.org/Code">
    <meta itemprop="url" content="https://freemarker.apache.org/docs/">
    <meta itemprop="name" content="Apache FreeMarker Manual">

  <!--[if lte IE 9]>
  <div class="oldBrowserWarning" style="display: block">
    Unsupported web browser - Use a modern browser to view this website!
  </div>
  <![endif]-->  <div class="oldBrowserWarning">
    Unsupported web browser - Use a modern browser to view this website!
  </div>
<div class="header-top-bg"><div class="site-width header-top"><div id="hamburger-menu" role="button"></div>          <div class="logo">
<a href="https://freemarker.apache.org" role="banner"><img itemprop="image" src="logo.png" alt="FreeMarker"></a>          </div>
<ul class="tabs"><li><a href="https://freemarker.apache.org/">Home</a></li><li class="current"><a href="index.html">Manual</a></li><li><a class="external" href="api/index.html">Java API</a></li></ul><ul class="secondary-tabs"><li><a class="tab icon-heart" href="https://freemarker.apache.org/contribute.html" title="Contribute"><span>Contribute</span></a></li><li><a class="tab icon-bug" href="https://issues.apache.org/jira/browse/FREEMARKER/" title="Report a Bug"><span>Report a Bug</span></a></li><li><a class="tab icon-download" href="https://freemarker.apache.org/freemarkerdownload.html" title="Download"><span>Download</span></a></li></ul></div></div><div class="header-bottom-bg"><div class="site-width search-row"><a href="toc.html" class="navigation-header">Manual</a><div class="navigation-header"></div></div><div class="site-width breadcrumb-row">  <div class="breadcrumbs">
<ul class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList"><li class="step-0" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="label" itemprop="item" href="toc.html"><span itemprop="name">Apache FreeMarker Manual</span></a></li><li class="step-1" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="label" itemprop="item" href="app.html"><span itemprop="name">Appendixes</span></a></li><li class="step-2" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="label" itemprop="item" href="app_versions.html"><span itemprop="name">Version history</span></a></li><li class="step-3" itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem"><a class="label" itemprop="item" href="versions_2_3_30.html"><span itemprop="name">2.3.30</span></a></li></ul>  </div>
<div class="bookmarks" title="Bookmarks"><span class="sr-only">Bookmarks:</span><ul><li><a href="alphaidx.html">Alpha. index</a></li><li><a href="gloss.html">Glossary</a></li><li><a href="dgui_template_exp.html#exp_cheatsheet">Expressions</a></li><li><a href="ref_builtins_alphaidx.html">?builtins</a></li><li><a href="ref_directive_alphaidx.html">#directives</a></li><li><a href="ref_specvar.html">.spec_vars</a></li><li><a href="app_faq.html">FAQ</a></li></ul></div></div></div>    <div class="main-content site-width">
      <div class="content-wrapper">
  <div id="table-of-contents-wrapper" class="col-left">
      <script>var breadcrumb = ["Apache FreeMarker Manual","Appendixes","Version history","2.3.30"];</script>
      <script src="toc.js?1612906439515"></script>
      <script src="docgen-resources/main.min.js?1612906439515"></script>
  </div>
<div class="col-right"><div class="page-content"><div class="page-title"><div class="pagers top"><a class="paging-arrow previous" href="versions_2_3_31.html"><span>Previous</span></a><a class="paging-arrow next" href="versions_2_3_29.html"><span>Next</span></a></div><div class="title-wrapper">
<h1 class="content-header header-section1" id="versions_2_3_30" itemprop="headline">2.3.30</h1>
</div></div><div class="page-menu">
<div class="page-menu-title">Page Contents</div>
<ul><li><a class="page-menu-link" href="#autoid_152" data-menu-target="autoid_152">Changes on the FTL side</a></li><li><a class="page-menu-link" href="#autoid_153" data-menu-target="autoid_153">Changes on the Java side</a></li></ul> </div><p>Release date: 2020-03-05</p><p>Please note that with this version the minimum required Java
        version was increased from Java 5 to Java 7.</p>
          



<h2 class="content-header header-section2" id="autoid_152">Changes on the FTL side</h2>


          <ul>
            <li>
              <p><a href="https://issues.apache.org/jira/browse/FREEMARKER-107">FREEMARKER-107</a>:
              Added
              <code class="inline-code">?<em class="code-color">with_args</em>(dynamicArguments)</code>
              and
              <code class="inline-code">?<em class="code-color">with_args_last</em>(dynamicArguments)</code>
              to add parameters dynamically to directive (like macro),
              function and method calls. Actually, this built-in returns a
              directive or macro or function that has different parameter
              defaults. <a href="ref_builtins_expert.html#ref_builtin_with_args">See more
              here...</a></p>
            </li>

            <li>
              <p><a href="https://issues.apache.org/jira/browse/FREEMARKER-107">FREEMARKER-107</a>:
              Added new special variable, <a href="ref_specvar.html#specvar.args"><code>.args</code></a>. This
              evaluates to a hash in macros, and to a sequence in functions,
              which contains all the arguments. This is useful for operations
              that act on all the arguments uniformly, like for example to
              pass the arguments to <a href="ref_builtins_expert.html#ref_builtin_with_args"><code>?with_args(<em>...</em>)</code></a>.</p>
            </li>

            <li>
              <p><a href="ref_directive_macro.html#ref.directive.macro">Macro catch-all
              parameters</a> (aka. varargs parameters), when capture
              arguments passed by name (as opposed to by position), now keep
              the original order of arguments. Earlier the order wasn&#39;t
              predictable.</p>
            </li>

            <li>
              <p>Bug fixed: In <code class="inline-code">&lt;#escape
              <em class="code-color">placeholder</em> as
              <em class="code-color">escExpression</em>&gt;</code>, the
              <code class="inline-code"><em class="code-color">placeholder</em></code> wasn&#39;t
              substituted inside lambda expressions inside
              <code class="inline-code"><em class="code-color">escExpression</em></code>.
              Fortunately it&#39;s very unlikely that anyone wanted to use lambdas
              there (given the few built-ins that accept lambdas).</p>
            </li>
          </ul>
        
          



<h2 class="content-header header-section2" id="autoid_153">Changes on the Java side</h2>


          <ul>
            <li>
              <p>The minimum required Java version was increased from Java
              5 to Java 7.</p>
            </li>

            <li>
              <p><a href="https://issues.apache.org/jira/browse/FREEMARKER-124">FREEMARKER-124</a>:
              Made the default filtering of class members more restrictive
              (when you are using <code class="inline-code">BeansWrapper</code>, or its
              subclasses like <code class="inline-code">DefaultObjectWrapper</code>). This
              is not strictly backward compatible, but unlikely to break any
              real-world applications; see
              <code class="inline-code">src/main/resources/freemarker/ext/beans/DefaultMemberAccessPolicy-rules</code>
              to see what was changed. This change was made for security
              reasons, but the default behavior will never be safe enough if
              untrusted users will edit templates; see <a href="app_faq.html#faq_template_uploading_security">in the FAQ</a>. In
              the unlikely case this change breaks your application, then you
              can still use the old behavior by setting the
              <code class="inline-code">memberAccessPolicy</code> property of the object
              wrapper to
              <code class="inline-code">LegacyDefaultMemberAccessPolicy.INSTANCE</code>.</p>
            </li>

            <li>
              <p>Added
              <code class="inline-code">freemarker.ext.beans.MemberAccessPolicy</code>
              interface, and the <code class="inline-code">memberAccessPolicy</code>
              property to <code class="inline-code">BeansWrapper</code>, and subclasses like
              <code class="inline-code">DefaultObjectWrapper</code>. This allows users to
              implement their own program logic to decide what members of
              classes will be exposed to the templates. See See the <a href="api/index.html">FreeMarker Java API documentation</a> for
              more details.</p>
            </li>

            <li>
              <p>Added
              <code class="inline-code">freemarker.ext.beans.WhitelistMemberAccessPolicy</code>,
              which is a <code class="inline-code">MemberAccessPolicy</code> for use cases
              where you want to allow editing templates to users who shouldn&#39;t
              have the same rights as the developers (the same rights as the
              Java application). Earlier, the only out of the box solution for
              that was <code class="inline-code">SimpleObjectWrapper</code>, but that&#39;s too
              restrictive for most applications where FreeMarker is used.
              <code class="inline-code">WhitelistMemberAccessPolicy</code> works with
              <code class="inline-code">DefaultObjectWrapper</code> (or any other
              <code class="inline-code">BeansWrapper</code>), allowing you to use all
              features of it, but it will only allow accessing members that
              were explicitly listed by the developers, or was annotated with
              <code class="inline-code">@TemplateAccessible</code>.</p>
            </li>

            <li>
              <p><a href="https://issues.apache.org/jira/browse/FREEMARKER-125">FREEMARKER-125</a>:
              FreeMarker now picks up <code class="inline-code">DecimalFormatSymbols</code>
              provided by the <code class="inline-code">DecimalFormatSymbolsProvider</code>
              SPI. This is useful if you need to change the decimal format
              symbols provided for a locale by Java.</p>
            </li>

            <li>
              <p><a href="https://issues.apache.org/jira/browse/FREEMARKER-120">FREEMARKER-120</a>:
              <code class="inline-code">BeansWrapper</code> (and it&#39;s subclasses like
              <code class="inline-code">DefaultObjectWrapper</code>) now has two protected
              methods that can be overridden to monitor the accessing of
              members: <code class="inline-code">invokeMethod</code> and
              <code class="inline-code">readField</code>.</p>
            </li>

            <li>
              <p>Setting <code class="inline-code">incompatibleImprovements</code> to the
              instance returned by
              <code class="inline-code">Configuration.getVersion()</code> will now be logged
              as an error, but for backward compatibility it will still work.
              This applies to said setting of
              <code class="inline-code">Configuration</code>,
              <code class="inline-code">DefaultObjectWrapper</code>, and
              <code class="inline-code">BeansWrapper</code>. The typical bad pattern is
              this: <code class="inline-code">new
              Configuration(Configuration.getVersion())</code>. Doing that
              defeats the purpose of
              <code class="inline-code">incompatibleImprovements</code>, and makes upgrading
              FreeMarker a potentially breaking change. Furthermore, doing
              this probably won&#39;t be allowed starting from 2.4.0, and will
              throw exception. So if above mistake is present in your
              application, it should be fixed by setting
              <code class="inline-code">incompatibleImprovements</code> to the highest
              concrete version that&#39;s known to be compatible with the
              application.</p>
            </li>

            <li>
              <p>Added
              <code class="inline-code">Environment.getDataModelOrSharedVariable(String)</code>.</p>
            </li>

            <li>
              <p>Bug fixed: AST traversal API now can properly traverse the
              inside of lambda expressions (such as the parameter list)</p>
            </li>

            <li>
              <p>Added a new <code class="inline-code">SimpleHash</code> constructor,
              where the caller can provide the <code class="inline-code">Map</code> instance
              used as the backing storage, thus allows controlling the
              ordering, and other technical aspects (like the initial
              capacity) of it.</p>
            </li>
          </ul>
        <div class="bottom-pagers-wrapper"><div class="pagers bottom"><a class="paging-arrow previous" href="versions_2_3_31.html"><span>Previous</span></a><a class="paging-arrow next" href="versions_2_3_29.html"><span>Next</span></a></div></div></div></div>      </div>
    </div>
<div class="site-footer"><div class="site-width"><div class="footer-top"><div class="col-left sitemap"><div class="column"><h3 class="column-header">Overview</h3><ul><li><a href="https://freemarker.apache.org/">What is FreeMarker?</a></li><li><a href="https://freemarker.apache.org/freemarkerdownload.html">Download</a></li><li><a href="app_versions.html">Version history</a></li><li><a href="https://freemarker.apache.org/history.html">About us</a></li><li><a itemprop="license" href="app_license.html">License</a></li></ul></div><div class="column"><h3 class="column-header">Handy stuff</h3><ul><li><a href="http://try.freemarker.org/">Try template online</a></li><li><a href="dgui_template_exp.html#exp_cheatsheet">Expressions cheatsheet</a></li><li><a href="ref_directive_alphaidx.html">#directives</a></li><li><a href="ref_builtins_alphaidx.html">?built_ins</a></li><li><a href="ref_specvar.html">.special_vars</a></li></ul></div><div class="column"><h3 class="column-header">Community</h3><ul><li><a href="https://github.com/freemarker/freemarker">FreeMarker on Github</a></li><li><a href="https://twitter.com/freemarker">Follow us on Twitter</a></li><li><a href="https://issues.apache.org/jira/browse/FREEMARKER/">Report a bug</a></li><li><a href="https://stackoverflow.com/questions/ask?tags=freemarker">Ask a question</a></li><li><a href="https://freemarker.apache.org/mailing-lists.html">Mailing lists</a></li></ul></div></div><div class="col-right"><ul class="social-icons"><li><a class="github" href="https://github.com/freemarker/freemarker">Github</a></li><li><a class="twitter" href="https://twitter.com/freemarker">Twitter</a></li><li><a class="stack-overflow" href="https://stackoverflow.com/questions/ask?tags=freemarker">Stack Overflow</a></li></ul><a class="xxe" href="http://www.xmlmind.com/xmleditor/" rel="nofollow" title="Edited with XMLMind XML Editor"><span>Edited with XMLMind XML Editor</span></a></div></div><div class="footer-bottom"> <p class="last-generated">
Last generated:
<time itemprop="dateModified" datetime="2021-02-09T21:33:59Z" title="Tuesday, February 9, 2021 9:33:59 PM GMT">2021-02-09 21:33:59 GMT</time>, for Freemarker 2.3.31 </p>
<p class="copyright">
© <span itemprop="copyrightYear">1999</span>–2021
<a itemtype="http://schema.org/Organization" itemprop="copyrightHolder" href="https://apache.org/">The Apache Software Foundation</a>. Apache FreeMarker, FreeMarker, Apache Incubator, Apache, the Apache FreeMarker logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p>
</div></div></div></body>
</html>
